<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Signin Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <!--<link href="../../dist/css/bootstrap.min.css" rel="stylesheet">-->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!--<link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">-->

    <!-- Custom styles for this template -->
    <!--<link href="signin.css" rel="stylesheet">-->

    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">

      <div class="form-signin">
        <h2 class="text-center">Create A New Account</h2>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
      
        <label for="inputEmail" class="sr-only3">Name</label>
        <input type="name" tabindex = "0" id="name" class="form-control" placeholder="Enter Your Name " required>
        <br>
        <label for="inputEmail" class="sr-only3">Email address</label>
        <input type="email" id="email" class="form-control" placeholder="Enter Email address" required autofocus>
        <br>
        <label for="inputPassword" class="sr-only3">Password</label>
        <input type="password" id="password" class="form-control" placeholder="Enter Password" required>
        <br>
        <label for="inputPassword" class="sr-only3">Confirm Password</label>
        <input type="password" id="password2" class="form-control" placeholder="Retype Password" required>
        <br>
    
        
        
        
        <button class="btn btn-lg btn-primary btn-block" onclick = "doit()">Sign up</button>
        <button class="btn btn-lg btn-secondary btn-block" onclick="window.location.href='https://noaharmiger.github.io'">HomePage</button>
      </div>

    </div> <!-- /container -->

      <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>

    
        <div id="map"></div>
        <script>
            //Used to login returning users
            function login(email, password) {
                mRef.authWithPassword({
                    email   : email,
                    password: password
                }, function(error, authData) {
                if(error) {
                    console.log("Login Failed!", error);
                } else {
                    console.log("Authenticated successfully with payload:", authData)
                }
            });
                
            }
            
            //Used when creating new users
            function createAccount(email, password, name) {
                var success = false;
                mRef.createUser({
                    email: email,
                    password: password
                }, function(error, userData) {
                    if (error) {
                        switch (error.code) {
                            case "EMAIL_TAKEN":
                                console.log("The new user account cannot be created because the email is already in use.");
                                break;
                            case "INVALID_EMAIL":
                                console.log("The specified email is not a valid email.");
                                break;
                            default:
                                console.log("Error creating user:", error);
                            }
                    } else {
                        console.log("Successfully created user account with uid:", userData.uid);
                        successCreated();
                        
                    }
                });
                function successCreated() {
                    mRef.child("Users").push({
                        EmailAddress: email,
                        Name: name
                    });
                }
                
            }
            
            
            
            //var mRef = new Firebase("https://glaring-inferno-647.firebaseio.com/");
            var mRef = new Firebase("https://hackathondrive.firebaseio.com/");
        
           createAccount( document.getElementById("email").value, document.getElementById("password").value, document.getElementById("name").value);
      </script>
    <script>
    </script>
    </body>
</html>
